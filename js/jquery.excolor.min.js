/*!
 * ExColor for jQuery
 * http://excolor.ramiro.mx/
 */
;jQuery.fn.excolor=function(a){var a=jQuery.extend({hue_bar:0,hue_slider:0,sb_slider:0,color_box:true,demo_mode:false,show_color_on_border:false,border_color:"black",sb_border_color:"black",anim_speed:"slow",round_corners:true,shadow:true,shadow_size:4,shadow_color:"#8a8a8a",background_color:"silver",backlight:true,input_text_color:"black",input_background_color:"white",label_color:"black",effect:"none",root_path:false,rgb_output:false,callback_on_ok:function(){var b=""}},a);return this.each(function(){var ay="mel",aE="mel",I=0,G=0,aa=0,aF=0,H=0,S=0,x=0,e=0,ad=0,aC=0,h=0,aD=1,d=1,r=0,Q=0,E=0,P=0,R=0,g=0,f=0,D=0,av=0,b=this,ae=jQuery(this).offset(),O=false,U=0,az=0,c=0,ap=false,T="",Y="",aG=/\d+\,\d+\,\d+/i,aI=a.rgb_output,am=0,s=0;aE=jQuery("script");if(!a.root_path){for(var aA=0;aA<aE.length;aA++){ay=""+jQuery(aE[aA]).attr("src");ay=ay.toLowerCase();ay=ay.split("jquery.excolor.js");if(ay.length==2){root_path=ay[0];console.log(root_path)}}}else{root_path=a.root_path}var aw=new Image();var au=new Image();var at=new Image();var ar=new Image();var aq=new Image();var ao=new Image();var an=new Image();var ak=new Image();aw.src=root_path+"sel.gif";au.src=root_path+"slider.gif";at.src=root_path+"bg.png";ar.src=root_path+"hue.png";aq.src=root_path+"ok.png";ao.src=root_path+"shbg.png";an.src=root_path+"transp0.gif";ak.src=root_path+"transp.gif";aE="mel";ay="mel";jQuery(b).mouseenter(function(){clearTimeout(c);c=setTimeout(function(){az=true},100)}).mouseleave(function(){clearTimeout(c);c=setTimeout(function(){az=false},100)});if(a.color_box){jQuery(b).wrap('<span style="margin:0;padding:0 '+jQuery(b).outerHeight()+'px 0 0;display:inline-block;border:none;background:none;line-height:auto;"></span>')}var aj="",X="",al="",Z="",F="";if(a.round_corners){aj="-khtml-border-radius:2px;-moz-border-radius:2px;-webkit-border-radius:2px;border-radius:2px;";X="-khtml-border-radius:2px;-moz-border-radius:2px;-webkit-border-radius:2px;border-radius:2px;";al="-khtml-border-radius: 0 2px 2px 2px;-moz-border-radius: 0 2px 2px 2px;-webkit-border-radius: 0 2px 2px 2px;border-radius: 0 2px 2px 2px;"}if(a.shadow){Z="box-shadow:0 "+a.shadow_size+"px "+(a.shadow_size*2)+"px 0 "+a.shadow_color+";-webkit-box-shadow:0 "+a.shadow_size+"px "+(a.shadow_size*2)+"px 0 "+a.shadow_color+";-moz-box-shadow:0 "+a.shadow_size+"px "+(a.shadow_size*2)+"px 0 "+a.shadow_color+";"}if(a.backlight){F="background-position:0 0;background-repeat:no-repeat;background-image:url("+root_path+"shbg.png);"}var ag=new Array(0,1,2,3,4,5,6,7,8,9);ag[8]=8;ag[46]=46;var af=new Array();af["0"]=1;af["1"]=1;af["2"]=1;af["3"]=1;af["4"]=1;af["5"]=1;af["6"]=1;af["7"]=1;af["8"]=1;af["9"]=1;af.A=1;af.B=1;af.C=1;af.D=1;af.E=1;af.F=1;af.a=1;af.b=1;af.c=1;af.d=1;af.e=1;af.f=1;var ac=new Array();ac[0]="system keys";ac[8]="backspace";ac[118]="ctrl v";ac[86]="ctrl v";ac[99]="ctrl c";ac[67]="ctrl c";var K=" "+Math.random();K=K.split(".");K="mc"+K[1];var J=jQuery(b).parent().offset();jQuery(b).parent().append('&nbsp;<input class="excolor_clrbox" readonly="readonly" id="'+K+'" type="text" style="display:none;cursor:pointer;width:'+(jQuery(b).outerHeight()-4)+"px;height:"+(jQuery(b).outerHeight()-4)+"px;background:none;"+X+"border:1px solid "+a.border_color+';" />');jQuery(b).clone().show().addClass("mds"+K).css("position","absolute").css("visibility","hidden").appendTo("body");setTimeout(function(){var i=jQuery("body > .mds"+K);jQuery(i).remove()},300);U=jQuery(b).parent().find("#"+K).mouseenter(function(){clearTimeout(c);c=setTimeout(function(){az=true},50)}).mouseleave(function(){clearTimeout(c);c=setTimeout(function(){az=false},50)}).focus(function(){jQuery(b).focus()});if(a.color_box){setTimeout(function(){jQuery(U).show()},150)}ai();function ai(){T=jQuery.trim(jQuery(b).val()+"");Y="";if(T==""){jQuery(U).val("").css("background","url("+root_path+"transp.gif) repeat");jQuery(S).find("input").val("")}else{if(T.match(aG)){aI=true;rgbstring=aH(T);Y=ax(rgbstring[0],rgbstring[1],rgbstring[2])}else{for(var j=0;j<T.length;j++){if(T.charAt(j)!="#"&&(T.charAt(j)+"") in af){if(Y.length<6){Y+=T.charAt(j)+""}}}switch(Y.length){case 0:Y="000000"+Y;break;case 1:Y="00000"+Y;break;case 2:Y="0000"+Y;break;case 3:Y="000"+Y;break;case 4:Y="00"+Y;break;case 5:Y="0"+Y;break}}T=C(Y);T=L(T.r,T.g,T.b);ad=120-Math.round(T.h*1/3);if(ad<0){ad=0}if(ad>119){ad=119}aD=T.s;d=T.v;jQuery(U).css("background","#"+Y)}if(a.show_color_on_border){jQuery(b).css("border-color","#"+Y)}}function ab(){if(!O){return false}jQuery(r).remove();jQuery(h).remove();jQuery(s).remove();az=true;switch(a.effect){case"zoom":jQuery(S).animate({width:"0px",height:"0px"},a.anim_speed,function(){aJ();jQuery(S).remove()});break;case"slide":jQuery(S).slideUp(a.anim_speed,function(){aJ();jQuery(S).remove()});break;case"fade":jQuery(S).fadeTo(a.anim_speed,0,function(){aJ();jQuery(S).remove()});break;default:aJ();jQuery(S).remove();break}O=false}function aJ(){if(ap){var j="#"+ax(jQuery(E).val()*1,jQuery(P).val()*1,jQuery(R).val()*1);var i=jQuery(E).val()*1+","+jQuery(P).val()*1+","+jQuery(R).val()*1;if(jQuery.trim(jQuery(E).val())==""&&jQuery.trim(jQuery(P).val())==""&&jQuery.trim(jQuery(R).val())==""){jQuery(U).css("background","url("+root_path+"transp.gif) repeat");jQuery(b).val("")}else{jQuery(U).css("background",j);if(a.show_color_on_border){jQuery(b).css("border-color",j)}console.log(aI);if(aI){jQuery(b).val(i)}else{jQuery(b).val(j)}}ap=false;a.callback_on_ok()}}function ah(){var i=L(jQuery(E).val()*1,jQuery(P).val()*1,jQuery(R).val()*1);ad=-1*(Math.round(i.h*1/3)-120);if(ad<0){ad=0}if(ad>119){ad=119}aD=i.s;d=i.v;jQuery(r).css("left",e.left+"px").css("top",(e.top+ad)+"px");aB();V();jQuery(g).val(ax(jQuery(E).val()*1,jQuery(P).val()*1,jQuery(R).val()*1))}function N(){var k=true,m="";m=jQuery.trim(jQuery(g).val());switch(m.length){case 1:m="00000"+m;break;case 2:m="0000"+m;break;case 3:m="000"+m;break;case 4:m="00"+m;break;case 5:m="0"+m;break}if(m.length>0){for(var l=0;l<m.length;l++){if(!((m.charAt(l)+"") in af)){k=false}}}if(k){if(m==""){ad=119;aD=0;d=0}else{var j=C(m);jQuery(E).val(j.r);jQuery(P).val(j.g);jQuery(R).val(j.b);var j=L(j.r,j.g,j.b);ad=-1*(Math.round(j.h*1/3)-120);if(ad<0){ad=0}if(ad>119){ad=119}aD=j.s;d=j.v}jQuery(r).css("left",e.left+"px").css("top",(e.top+ad)+"px");aB();V();if(m==""){jQuery(Q).css("background-image","url("+root_path+"transp.gif)").css("background-repeat","repeat");jQuery(U).val("").css("background","url("+root_path+"transp.gif) repeat");jQuery(s).css("background","url("+root_path+"transp0.gif) -20px 0 no-repeat");jQuery(S).find("input").val("")}}}function v(){var i=M(-1*(ad-119)*3,aD,d,"rgb");jQuery(E).val(Math.round(i.r)*1);jQuery(P).val(Math.round(i.g)*1);jQuery(R).val(Math.round(i.b)*1);jQuery(g).val(ax(i.r,i.g,i.b))}function M(u,t,q,o){var k=u/360;var A=t/100;var w=q/100;var n=new Array();var l,m,i,z,y,j,p;if(A==0){n.r=w*255;n.g=w*255;n.b=w*255}else{l=k*6;m=Math.floor(l);i=w*(1-A);z=w*(1-A*(l-m));y=w*(1-A*(1-(l-m)));if(m==0){j=w;p=y;var_b=i}else{if(m==1){j=z;p=w;var_b=i}else{if(m==2){j=i;p=w;var_b=y}else{if(m==3){j=i;p=z;var_b=w}else{if(m==4){j=y;p=i;var_b=w}else{j=w;p=i;var_b=z}}}}}n.r=Math.round(j*255);n.g=Math.round(p*255);n.b=Math.round(var_b*255)}if(o=="hex"){return ax(n.r,n.g,n.b)}else{if(o=="rgb"){return(n)}else{return(n)}}}function C(n){var l=new String();l=n;l.toUpperCase();n=l;var m,k="0123456789ABCDEF",o="";var j=new Array();if(n){n=n.toUpperCase();for(m=0;m<6;m+=2){switch(m){case 0:j.r=(16*k.indexOf(n.charAt(m))+k.indexOf(n.charAt(m+1)))*1;break;case 2:j.g=(16*k.indexOf(n.charAt(m))+k.indexOf(n.charAt(m+1)))*1;break;case 4:j.b=(16*k.indexOf(n.charAt(m))+k.indexOf(n.charAt(m+1)))*1;break}}}return j}function L(p,n,m){var l=0,i=0,q=0,j=0,t=0,o=0;var k=new Array();j=0;l=Math.min(Math.min(p,n),m);i=Math.max(Math.max(p,n),m);q=(i-l);o=i;if(i!=0){t=255*q/i}else{t=0}if(t!=0){if(p==i){j=(n-m)/q}else{if(n==i){j=2+(m-p)/q}else{if(m==i){j=4+(p-n)/q}}}}else{j=-1}j=j*60;if(j<0){j=j+360}k.h=Math.round(j);k.s=Math.round(t*100/255);k.v=Math.round(o*100/255);if(k.h>360){k.h=360}if(k.s>100){k.s=100}if(k.v>100){k.v=100}return k}function aH(i){array=i.split(",");return array}function ax(n,m,j){var k=new Array();k[0]=n;k[1]=m;k[2]=j;var p=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];var o="";for(var l=0;l<k.length;l++){dec=parseInt(k[l]);o+=p[parseInt(dec/16)]+p[dec%16]}return o}function aB(){jQuery(r).css("left",e.left+"px").css("top",(e.top+ad)+"px");jQuery(h).css("left",(pos_sbbox.left+Math.round(aD*1.3)-4)+"px").css("top",(pos_sbbox.top+jQuery(aC).height()-4-Math.round(d*1.3))+"px")}function V(){jQuery(aC).css("background-color","#"+M(-1*(ad-119)*3,100,100,"hex"));jQuery(Q).css("background-color","#"+M(-1*(ad-119)*3,aD,d,"hex")).css("background-image","none");jQuery(s).css("background","url("+root_path+"transp0.gif) 0 0 no-repeat")}setTimeout(function(){ae=jQuery(b).offset()},200);function W(){var i=-1*a.hue_bar*20;var j='<div id="excolor_sample_wrapper"><div id="excolor_sample"></div></div>';ai();jQuery("body").append('<div id="excolor_colorpicker"><div id="excolor_colorpicker_wrapper"><div id="excolor_grad_wrap"><div id="excolor_grad"><div style="width:130px;height:130px;float:left;background-image:url('+root_path+'bg.png);background-position:0 0;background-repeat:no-repeat;border:1px solid white;padding:0;margin:0;"></div></div></div><div id="excolor_hue_wrap" style="width:20px;height:130px;float:left;padding:15px 8px 0px 10px;margin:0;border:none;"><div id="excolor_hue" style="width:20px;height:130px;float:left;background:url('+root_path+"hue.png) "+i+'px 0 no-repeat;margin:0;padding:0;border:none;"></div></div><div id="excolor_data" style="float:left;font-size:10px;font-family: Verdana, Arial, Helvetica, Sans-serif;width:66px;height:140px;margin:0;padding:0;border:none;">'+j+'<div class="excolor_dataitem first"><b class="label">R</b><input id="excolor_r" class="excolor_input excolor_rgb" type="text" size="3" maxlength="3" /></div><div class="excolor_dataitem" style="float:left;padding:3px 0 0 0;margin:0;border:none;"><b class="label">G</b><input id="excolor_g" class="excolor_input excolor_rgb" type="text" size="3" maxlength="3" /></div><div class="excolor_dataitem"><b class="label">B</b><input id="excolor_b" class="excolor_input excolor_rgb" type="text" size="3" maxlength="3" /></div><div class="excolor_dataitem last"><b class="label">#</b><input id="excolor_hex" class="excolor_input" type="text" size="6" maxlength="6" /></div><div style="width:66px;height:15px;padding:0;margin:0;border:none;float:left;"><div id="excolor_ok">OK</div><div id="excolor_close">X</div></div></div></div></div><div id="excolor_picker"></div><div id="excolor_slider"></div><div id="excolor_switcher"></div>');ae=jQuery(b).offset();S=jQuery("body > div#excolor_colorpicker").css("left",ae.left+"px").css("top",(ae.top+jQuery(b).outerHeight())+"px").mouseenter(function(){clearTimeout(c);c=setTimeout(function(){az=true},50)}).mouseleave(function(){clearTimeout(c);c=setTimeout(function(){az=false},50)});g=jQuery(S).find("input#excolor_hex");s=jQuery("body > div#excolor_switcher");r=jQuery("body > div#excolor_slider");h=jQuery("body > div#excolor_picker");switch(a.effect){case"zoom":jQuery(S).css("width","0px").css("height","0px").show().animate({width:"265px",height:"162px"},a.anim_speed,function(){jQuery(this).show();jQuery("body > div#excolor_slider, body > div#excolor_picker").show();jQuery(s).show()});break;case"slide":jQuery(S).slideDown(a.anim_speed,function(){jQuery(this).show();jQuery("body > div#excolor_slider, body > div#excolor_picker").show();jQuery(s).show()});break;case"fade":jQuery("body > div#excolor_colorpicker, body > div#excolor_slider, body > div#excolor_picker, body > div#excolor_switcher").fadeTo(1,0,function(){jQuery(this).show().fadeTo(a.anim_speed,1)});break;default:jQuery(S).show();jQuery(s).show();jQuery("body > div#excolor_slider, body > div#excolor_picker").show();break}H=jQuery(S).find("div#excolor_hue");aC=jQuery(S).find("div#excolor_grad div");Q=jQuery(S).find("#excolor_sample");E=jQuery(S).find("input#excolor_r");P=jQuery(S).find("input#excolor_g");R=jQuery(S).find("input#excolor_b");D=jQuery(S).find("#excolor_ok");av=jQuery(S).find("#excolor_close");x=jQuery(S).offset();pos_sbbox=jQuery(aC).offset();e=jQuery(H).offset();jQuery(s).click(function(){if(jQuery.trim(jQuery(E).val())==""&&jQuery.trim(jQuery(P).val())==""&&jQuery.trim(jQuery(R).val())==""){jQuery(Q).css("background-image","none");jQuery(this).css("background","url("+root_path+"transp0.gif) 0 0 no-repeat");v()}else{jQuery(Q).css("background-image","url("+root_path+"transp.gif)").css("background-repeat","repeat");jQuery(S).find("input").val("");jQuery(this).css("background","url("+root_path+"transp0.gif) -20px 0 no-repeat")}}).css("left",(e.left-1)+"px").css("top",(e.top-15)+"px").mouseenter(function(){clearTimeout(c);c=setTimeout(function(){az=true},50)}).mouseleave(function(){clearTimeout(c);c=setTimeout(function(){az=false},50)});jQuery(r).mouseenter(function(){clearTimeout(c);c=setTimeout(function(){az=true},50)}).mouseleave(function(){clearTimeout(c);c=setTimeout(function(){az=false},50)});jQuery(h).mouseenter(function(){clearTimeout(c);c=setTimeout(function(){az=true},50)}).mouseleave(function(){clearTimeout(c);c=setTimeout(function(){az=false},50)}).dblclick(function(k){jQuery(D).click()});jQuery(h).on("mousedown touchstart",function(k){aa=jQuery(this).offset();I=(k.pageX||k.originalEvent.targetTouches[0].pageX)-aa.left;G=(k.pageY||k.originalEvent.targetTouches[0].pageY)-aa.top;ay=this;jQuery(s).css("background","url("+root_path+"transp0.gif) 0 0 no-repeat");k.preventDefault()}).click(function(k){});jQuery(r).on("mousedown touchstart",function(k){aF=jQuery(this).offset();I=(k.pageX||k.originalEvent.targetTouches[0].pageX)-aF.left;G=(k.pageY||k.originalEvent.targetTouches[0].pageY)-aF.top;aE=this;jQuery(s).css("background","url("+root_path+"transp0.gif) 0 0 no-repeat");k.preventDefault()});jQuery(H).on("mousedown touchstart",function(k){if((k.pageY||k.originalEvent.targetTouches[0].pageY)>=(e.top+5)&&(k.pageY||k.originalEvent.targetTouches[0].pageY)<=((e.top+jQuery(H).height())-6)){ad=(k.pageY||k.originalEvent.targetTouches[0].pageY)-e.top-5;if(ad<0){ad=0}if(ad>119){ad=119}jQuery(s).css("background","url("+root_path+"transp0.gif) 0 0 no-repeat");aB();V();v();aF=jQuery(r).offset();I=(k.pageX||k.originalEvent.targetTouches[0].pageX)-aF.left;G=(k.pageY||k.originalEvent.targetTouches[0].pageY)-aF.top;aE=r;k.preventDefault()}});jQuery(aC).on("mousedown touchstart",function(k){aD=Math.round(((k.pageX||k.originalEvent.targetTouches[0].pageX)-pos_sbbox.left-1)/1.3);if(aD>100){aD=100}if(aD<1){aD=1}d=-1*(Math.round(((k.pageY||k.originalEvent.targetTouches[0].pageY)-pos_sbbox.top-1)/1.3)-100);if(d>100){d=100}if(d<1){d=1}jQuery(s).css("background","url("+root_path+"transp0.gif) 0 0 no-repeat");aB();jQuery(Q).css("background-color","#"+M(-1*(ad-119)*3,aD,d,"hex")).css("background-image","none");v();ay=h;aa=jQuery(ay).offset();I=(k.pageX||k.originalEvent.targetTouches[0].pageX)-aa.left;G=(k.pageY||k.originalEvent.targetTouches[0].pageY)-aa.top;k.preventDefault()});jQuery(S).find("input.excolor_input").keypress(function(k){if(jQuery(this).hasClass("excolor_rgb")){if(!((String.fromCharCode(k.which)*1) in ag)&&!(k.which in ac)){k.preventDefault()}}else{if(!(String.fromCharCode(k.which) in af)&&!(k.which in ac)){k.preventDefault()}}}).change(function(){if(jQuery(this).hasClass("excolor_rgb")){if(jQuery(this).val()==""){jQuery(this).val("0")}if(isNaN(jQuery(this).val()*1)){jQuery(this).val("0")}if(jQuery(this).val()*1>255){jQuery(this).val("255")}if(jQuery(this).val()*1<0){jQuery(this).val("0")}ah()}else{N()}}).keyup(function(){if(jQuery(this).hasClass("excolor_rgb")){if(jQuery(this).val()==""){jQuery(this).val("0")}if(isNaN(jQuery(this).val()*1)){jQuery(this).val("0")}if(jQuery(this).val()*1>255){jQuery(this).val("255")}if(jQuery(this).val()*1<0){jQuery(this).val("0")}ah()}else{N()}});g[0].onpaste=g[0].oninput=function(k){clearTimeout(f);f=setTimeout(function(){N()},100)};E[0].onpaste=E[0].oninput=P[0].onpaste=P[0].oninput=R[0].onpaste=R[0].oninput=function(k){if(jQuery(this).val()==""){jQuery(this).val("0")}if(isNaN(jQuery(this).val()*1)){jQuery(this).val("0")}if(jQuery(this).val()*1>255){jQuery(this).val("255")}if(jQuery(this).val()*1<0){jQuery(this).val("0")}clearTimeout(f);f=setTimeout(function(){ah()},100)};jQuery(D).click(function(){ap=true;ab()}).mouseenter(function(){jQuery(this).css("background-position","0 -15px")}).mouseleave(function(){jQuery(this).css("background-position","0 0")});jQuery(av).click(function(){ab()}).mouseenter(function(){jQuery(this).css("background-position","-47px -15px")}).mouseleave(function(){jQuery(this).css("background-position","-47px 0")});aB();jQuery(g).val(Y);N();O=true;if(Y==""){jQuery(s).css("background","url("+root_path+"transp0.gif) -20px 0 no-repeat")}else{jQuery(s).css("background","url("+root_path+"transp0.gif) 0 0 no-repeat")}}jQuery(document).on("mouseup touchend",function(i){ay="mel";aE="mel"}).on("mousemove touchmove",function(j){if(ay!="mel"){j.preventDefault();var i=0,k=0;i=(j.pageX||j.originalEvent.targetTouches[0].pageX)-I;if(i<(pos_sbbox.left-4)){i=pos_sbbox.left-4}if(i>(pos_sbbox.left+125)){i=pos_sbbox.left+125}k=(j.pageY||j.originalEvent.targetTouches[0].pageY)-G;if(k<(pos_sbbox.top-4)){k=pos_sbbox.top-4}if(k>(pos_sbbox.top+125)){k=pos_sbbox.top+125}jQuery(ay).css("left",i+"px").css("top",k+"px");d=-1*(Math.round((k-pos_sbbox.top+5)/1.3)-100)+1;aD=Math.round((i-pos_sbbox.left+5)/1.3);if(d==1){d=0}if(aD==1){aD=0}jQuery(Q).css("background-color","#"+M(-1*(ad-119)*3,aD,d,"hex")).css("background-image","none");v()}if(aE!="mel"){j.preventDefault();ad=(j.pageY||j.originalEvent.targetTouches[0].pageY)-e.top-G;if(ad<0){ad=0}if(ad>119){ad=119}jQuery(aE).css("left",e.left+"px").css("top",(e.top+ad)+"px");V();v()}}).keydown(function(i){if(i.keyCode=="27"){i.preventDefault();ab()}if(i.keyCode=="13"){i.preventDefault();jQuery(D).click()}}).click(function(){if(!az){ab()}});jQuery(b).click(function(){if(!O){jQuery("body > div#excolor_slider, body > div#excolor_picker, body > div#excolor_colorpicker").stop().remove();setTimeout(function(){W()},50)}}).keyup(function(){if(O){ai();v();aB();jQuery(g).val(Y);N()}});jQuery(U).click(function(){jQuery(b).click()});if(a.demo_mode){jQuery(U).click()}})};